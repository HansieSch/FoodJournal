angular.module("FoodJournalApp",["ngRoute"]),angular.module("FoodJournalApp").config(["$routeProvider",function(t){t.when("/",{templateUrl:"app/views/pages/home.html",controller:"mainCtrl"}).when("/allFoodItems",{templateUrl:"app/views/pages/fooditempages/allFoodItems.html",controller:"allFoodItemsCtrl"}).when("/singleFoodItem/:id?",{templateUrl:"app/views/pages/fooditempages/singleFoodItem.html",controller:"singleFoodItemCtrl"}).when("/createFoodItem",{templateUrl:"app/views/pages/fooditempages/createFoodItem.html",controller:"createFoodItemCtrl"}).when("/editFoodItem/:id?",{templateUrl:"app/views/pages/fooditempages/editFoodItem.html",controller:"editFoodItemCtrl"}),t.when("/allJournalEntries",{templateUrl:"app/views/pages/journalentrypages/allJournalEntries.html",controller:"allJournalEntriesCtrl"}).when("/createJournalEntry",{templateUrl:"app/views/pages/journalentrypages/createJournalEntry.html",controller:"createJournalEntryCtrl"}).when("/editJournalEntry/:id?",{templateUrl:"app/views/pages/journalentrypages/editJournalEntry.html",controller:"editJournalEntryCtrl"}).when("/singleJournalEntry/:id?",{templateUrl:"app/views/pages/journalentrypages/singleJournalEntry.html",controller:"singleJournalEntryCtrl"})}]);var foodJournalApp=angular.module("FoodJournalApp");foodJournalApp.controller("createFoodItemCtrl",["$scope","FoodItemService",function(t,e){t.status="unset",t.newItem=function(a){return a?void e.create(a).then(function(e){e.data.success?t.status=!0:(t.status=!1,console.log(e.data.error))}):(t.status=!1,null)}}]),foodJournalApp.controller("editFoodItemCtrl",["$scope","$routeParams","FoodItemService",function(t,e,a){t.status="unset",a.get(e.id).then(function(e){var a=e.data.item;t.edittedFoodItemData=a,t.edittedFoodItemData.energy=a.typical_nutritional_information.energy,t.edittedFoodItemData.protein=a.typical_nutritional_information.protein,t.edittedFoodItemData.total_carbs=a.typical_nutritional_information.carbohydrates.total,t.edittedFoodItemData.total_sugar=a.typical_nutritional_information.carbohydrates.total_sugar,t.edittedFoodItemData.total_fat=a.typical_nutritional_information.fat.total,t.edittedFoodItemData.saturated=a.typical_nutritional_information.fat.saturated,t.edittedFoodItemData.trans=a.typical_nutritional_information.fat.trans,t.edittedFoodItemData.mono_unsaturated=a.typical_nutritional_information.fat.mono_unsaturated,t.edittedFoodItemData.poly_unsaturated=a.typical_nutritional_information.fat.poly_unsaturated}),t.saveItem=function(o){a.update(e.id,o).then(function(e){return e?void(e.data.success?t.status=!0:(t.status=!1,console.log(e.data.error))):(t.status=!1,null)})}}]),foodJournalApp.controller("allFoodItemsCtrl",["$scope","FoodItemService",function(t,e){e.getAll().then(function(e){t.all=e.data.items})}]),foodJournalApp.controller("singleFoodItemCtrl",["$scope","$routeParams","FoodItemService","$location",function(t,e,a,o){t.status="unset",a.get(e.id).then(function(e){t.foodItemData=e.data.item,console.log("ID: "+t.foodItemData._id)}),t.removeItem=function(e){return e?void a.remove(e).then(function(e){e.data.success?o.path("/allFoodItems"):(t.status=!1,console.log(e.data.error))}):(t.status=!1,null)}}]);var foodJournalApp=angular.module("FoodJournalApp");foodJournalApp.controller("allJournalEntriesCtrl",["$scope","JournalEntryService",function(t,e){e.getAll().then(function(e){e.data.entries.forEach(function(t,e,a){a[e].timeCreated=new Date(t.date).getTime(),a[e].dateString=new Date(t.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),t.allEntries=e.data.entries})}]),foodJournalApp.controller("singleJournalEntryCtrl",["$scope","$routeParams","JournalEntryService","$location",function(t,e,a,o){a.get(e.id).then(function(e){e.data.entry.timeCreated=new Date(e.data.entry.date).getTime(),e.data.entry.dateString=new Date(e.data.entry.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),t.entryData=e.data.entry}),t.removeItem=function(t){a.remove(t).then(function(t){t.data.success&&o.path("/allJournalEntries")})}}]),foodJournalApp.controller("createJournalEntryCtrl",["$scope","JournalEntryService","FoodItemService","$location",function(t,e,a,o){t.newFoodItemData={},t.newJournalEntryData={total_calories_eaten:0,food_consumed:[]},t.contained=!1,a.getCategories().then(function(e){t.categories=e.data.metadata}),t.addItem=function(e){return!!e&&void a.find({type:e.type,brand:e.brand,name:e.name}).then(function(a){var o=a.data.item,n={id:o._id,name:o.name,brand:o.brand,type:o.type,calories_per_gram:o.calories_per_gram,amount_eaten:e.grams_eaten,calories_eaten:e.grams_eaten*o.calories_per_gram};t.newJournalEntryData.food_consumed.push(),t.newJournalEntryData.food_consumed.forEach(function(a,r,l){a.id===n.id&&(a.amount_eaten+=n.amount_eaten,a.calories_eaten+=e.grams_eaten*o.calories_per_gram,t.contained=!0)}),t.contained?t.contained=!1:t.newJournalEntryData.food_consumed.push(n),t.newJournalEntryData.total_calories_eaten+=o.calories_per_gram*e.grams_eaten,t.newFoodItemData={}})},t.saveEntry=function(t){e.create(t).then(function(t){t.data.success&&o.path("/allJournalEntries")})}}]),foodJournalApp.controller("editJournalEntryCtrl",["$scope","JournalEntryService","$routeParams","FoodItemService","$location",function(t,e,a,o,n){e.get(a.id).then(function(e){t.entry=e.data.entry}),o.getCategories().then(function(e){t.categories=e.data.metadata}),t.newFoodItemData={},t.contained=!1,t.addItem=function(e){return!!e&&void o.find({type:e.type,brand:e.brand,name:e.name}).then(function(a){var o=a.data.item,n={id:o._id,name:o.name,brand:o.brand,type:o.type,calories_per_gram:o.calories_per_gram,amount_eaten:e.grams_eaten,calories_eaten:e.grams_eaten*o.calories_per_gram};t.entry.food_consumed.push(),t.entry.food_consumed.forEach(function(a,r,l){a.id===n.id&&(a.amount_eaten+=n.amount_eaten,a.calories_eaten+=e.grams_eaten*o.calories_per_gram,t.contained=!0)}),t.contained?t.contained=!1:t.entry.food_consumed.push(n),t.entry.total_calories_eaten+=o.calories_per_gram*e.grams_eaten,t.newFoodItemData={}})},t.saveEntry=function(t,a){console.log(t),console.log(a),e.update(t,a).then(function(t){t.data.success&&n.path("/allJournalEntries")})}}]),angular.module("FoodJournalApp").controller("mainCtrl",["$scope","FoodItemService",function(t,e){}]),angular.module("FoodJournalApp").factory("FoodItemService",["$http",function(t){return{getAll:function(){return t.get("/api/fooditem")},create:function(e){return t.post("/api/fooditem",e)},get:function(e){return t.get("/api/fooditem/"+e)},update:function(e,a){return t.put("/api/fooditem/"+e,a)},remove:function(e){return t.delete("/api/fooditem/"+e)},find:function(e){return t({url:"/api/find/fooditem",method:"GET",params:{name:e.name,brand:e.brand,type:e.type}})},getCategories:function(){return t.get("/api/metadata/fooditem")}}}]),angular.module("FoodJournalApp").factory("JournalEntryService",["$http",function(t){return{getAll:function(){return t.get("/journalentry")},create:function(e){return t.post("/journalentry",e)},get:function(e){return t.get("/journalentry/"+e)},update:function(e,a){return t.put("/journalentry/"+e,a)},remove:function(e){return t.delete("/journalentry/"+e)}}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFwcC5yb3V0ZXMuanMiLCJjb250cm9sbGVycy9mb29kQ29udHJvbGxlcnMuanMiLCJjb250cm9sbGVycy9qb3VybmFsQ29udHJvbGxlcnMuanMiLCJjb250cm9sbGVycy9tYWluQ29udHJvbGxlci5qcyIsInNlcnZpY2VzL2Zvb2RJdGVtU2VydmljZS5qcyIsInNlcnZpY2VzL2pvdXJuYWxFbnRyeVNlcnZpY2UuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImZvb2RKb3VybmFsQXBwIiwiJHNjb3BlIiwiRm9vZEl0ZW1TZXJ2aWNlIiwic3RhdHVzIiwibmV3SXRlbSIsImRhdGEiLCJjcmVhdGUiLCJ0aGVuIiwic3VjY2VzcyIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsIiRyb3V0ZVBhcmFtcyIsImdldCIsImlkIiwiaXRlbSIsImVkaXR0ZWRGb29kSXRlbURhdGEiLCJlbmVyZ3kiLCJ0eXBpY2FsX251dHJpdGlvbmFsX2luZm9ybWF0aW9uIiwicHJvdGVpbiIsInRvdGFsX2NhcmJzIiwiY2FyYm9oeWRyYXRlcyIsInRvdGFsIiwidG90YWxfc3VnYXIiLCJ0b3RhbF9mYXQiLCJmYXQiLCJzYXR1cmF0ZWQiLCJ0cmFucyIsIm1vbm9fdW5zYXR1cmF0ZWQiLCJwb2x5X3Vuc2F0dXJhdGVkIiwic2F2ZUl0ZW0iLCJlZGl0dGVkRGF0YSIsInVwZGF0ZSIsImdldEFsbCIsImFsbCIsIml0ZW1zIiwiJGxvY2F0aW9uIiwiZm9vZEl0ZW1EYXRhIiwiX2lkIiwicmVtb3ZlSXRlbSIsIml0ZW1JZCIsInJlbW92ZSIsInBhdGgiLCJKb3VybmFsRW50cnlTZXJ2aWNlIiwiZW50cmllcyIsImZvckVhY2giLCJ2YWwiLCJpbmRleCIsImFycmF5IiwidGltZUNyZWF0ZWQiLCJEYXRlIiwiZGF0ZSIsImdldFRpbWUiLCJkYXRlU3RyaW5nIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwid2Vla2RheSIsInllYXIiLCJtb250aCIsImRheSIsImFsbEVudHJpZXMiLCJlbnRyeSIsImVudHJ5RGF0YSIsIm5ld0Zvb2RJdGVtRGF0YSIsIm5ld0pvdXJuYWxFbnRyeURhdGEiLCJ0b3RhbF9jYWxvcmllc19lYXRlbiIsImZvb2RfY29uc3VtZWQiLCJjb250YWluZWQiLCJnZXRDYXRlZ29yaWVzIiwiY2F0ZWdvcmllcyIsIm1ldGFkYXRhIiwiYWRkSXRlbSIsIm5ld0Zvb2RJdGVtIiwiZmluZCIsInR5cGUiLCJicmFuZCIsIm5hbWUiLCJmb29kSXRlbSIsIm5ld0Zvb2RDb25zdW1lZCIsImNhbG9yaWVzX3Blcl9ncmFtIiwiYW1vdW50X2VhdGVuIiwiZ3JhbXNfZWF0ZW4iLCJjYWxvcmllc19lYXRlbiIsInB1c2giLCJ2YWx1ZSIsInNhdmVFbnRyeSIsImVudHJ5SWQiLCJmYWN0b3J5IiwiJGh0dHAiLCJwb3N0IiwiZm9vZEl0ZW1JZCIsInB1dCIsImRlbGV0ZSIsInVybCIsIm1ldGhvZCIsInBhcmFtcyJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQUFDLE9BQUEsa0JBQ0EsWUNEQUQsUUFBQUMsT0FBQSxrQkFBQUMsUUFBQSxpQkFBQSxTQUFBQyxHQUdBQSxFQUVBQyxLQUFBLEtBQ0FDLFlBQUEsNEJBQ0FDLFdBQUEsYUFHQUYsS0FBQSxpQkFDQUMsWUFBQSxrREFDQUMsV0FBQSxxQkFJQUYsS0FBQSx3QkFDQUMsWUFBQSxvREFDQUMsV0FBQSx1QkFHQUYsS0FBQSxtQkFDQUMsWUFBQSxvREFDQUMsV0FBQSx1QkFHQUYsS0FBQSxzQkFDQUMsWUFBQSxrREFDQUMsV0FBQSxxQkFHQUgsRUFFQUMsS0FBQSxzQkFDQUMsWUFBQSwyREFDQUMsV0FBQSwwQkFHQUYsS0FBQSx1QkFDQUMsWUFBQSw0REFDQUMsV0FBQSwyQkFHQUYsS0FBQSwwQkFDQUMsWUFBQSwwREFDQUMsV0FBQSx5QkFHQUYsS0FBQSw0QkFDQUMsWUFBQSw0REFDQUMsV0FBQSw2QkNsREEsSUFBQUMsZ0JBQUFQLFFBQUFDLE9BQUEsaUJBRUFNLGdCQUFBRCxXQUFBLHNCQUFBLFNBQUEsa0JBQUEsU0FBQUUsRUFBQUMsR0FDQUQsRUFBQUUsT0FBQSxRQUNBRixFQUFBRyxRQUFBLFNBQUFDLEdBQ0EsTUFBQUEsT0FLQUgsR0FBQUksT0FBQUQsR0FBQUUsS0FBQSxTQUFBRixHQUNBQSxFQUFBQSxLQUFBRyxRQUlBUCxFQUFBRSxRQUFBLEdBSEFGLEVBQUFFLFFBQUEsRUFDQU0sUUFBQUMsSUFBQUwsRUFBQUEsS0FBQU0sV0FQQVYsRUFBQUUsUUFBQSxFQUNBLFVBY0FILGVBQUFELFdBQUEsb0JBQUEsU0FBQSxlQUFBLGtCQUFBLFNBQUFFLEVBQUFXLEVBQUFWLEdBQ0FELEVBQUFFLE9BQUEsUUFFQUQsRUFBQVcsSUFBQUQsRUFBQUUsSUFBQVAsS0FBQSxTQUFBRixHQUNBLEdBQUFVLEdBQUFWLEVBQUFBLEtBQUFVLElBRUFkLEdBQUFlLG9CQUFBRCxFQUNBZCxFQUFBZSxvQkFBQUMsT0FBQUYsRUFBQUcsZ0NBQUFELE9BQ0FoQixFQUFBZSxvQkFBQUcsUUFBQUosRUFBQUcsZ0NBQUFDLFFBQ0FsQixFQUFBZSxvQkFBQUksWUFBQUwsRUFBQUcsZ0NBQUFHLGNBQUFDLE1BQ0FyQixFQUFBZSxvQkFBQU8sWUFBQVIsRUFBQUcsZ0NBQUFHLGNBQUFFLFlBQ0F0QixFQUFBZSxvQkFBQVEsVUFBQVQsRUFBQUcsZ0NBQUFPLElBQUFILE1BQ0FyQixFQUFBZSxvQkFBQVUsVUFBQVgsRUFBQUcsZ0NBQUFPLElBQUFDLFVBQ0F6QixFQUFBZSxvQkFBQVcsTUFBQVosRUFBQUcsZ0NBQUFPLElBQUFFLE1BQ0ExQixFQUFBZSxvQkFBQVksaUJBQUFiLEVBQUFHLGdDQUFBTyxJQUFBRyxpQkFDQTNCLEVBQUFlLG9CQUFBYSxpQkFBQWQsRUFBQUcsZ0NBQUFPLElBQUFJLG1CQUdBNUIsRUFBQTZCLFNBQUEsU0FBQUMsR0FDQTdCLEVBQUE4QixPQUFBcEIsRUFBQUUsR0FBQWlCLEdBQUF4QixLQUFBLFNBQUFGLEdBQ0EsTUFBQUEsUUFLQUEsRUFBQUEsS0FBQUcsUUFJQVAsRUFBQUUsUUFBQSxHQUhBRixFQUFBRSxRQUFBLEVBQ0FNLFFBQUFDLElBQUFMLEVBQUFBLEtBQUFNLFVBTkFWLEVBQUFFLFFBQUEsRUFDQSxZQWFBSCxlQUFBRCxXQUFBLG9CQUFBLFNBQUEsa0JBQUEsU0FBQUUsRUFBQUMsR0FDQUEsRUFBQStCLFNBQUExQixLQUFBLFNBQUFGLEdBQ0FKLEVBQUFpQyxJQUFBN0IsRUFBQUEsS0FBQThCLFdBSUFuQyxlQUFBRCxXQUFBLHNCQUFBLFNBQUEsZUFBQSxrQkFBQSxZQUFBLFNBQUFFLEVBQUFXLEVBQUFWLEVBQUFrQyxHQUNBbkMsRUFBQUUsT0FBQSxRQUVBRCxFQUFBVyxJQUFBRCxFQUFBRSxJQUFBUCxLQUFBLFNBQUFRLEdBQ0FkLEVBQUFvQyxhQUFBdEIsRUFBQVYsS0FBQVUsS0FDQU4sUUFBQUMsSUFBQSxPQUFBVCxFQUFBb0MsYUFBQUMsT0FHQXJDLEVBQUFzQyxXQUFBLFNBQUFDLEdBQ0EsTUFBQUEsT0FLQXRDLEdBQUF1QyxPQUFBRCxHQUFBakMsS0FBQSxTQUFBRixHQUNBQSxFQUFBQSxLQUFBRyxRQUlBNEIsRUFBQU0sS0FBQSxrQkFIQXpDLEVBQUFFLFFBQUEsRUFDQU0sUUFBQUMsSUFBQUwsRUFBQUEsS0FBQU0sV0FQQVYsRUFBQUUsUUFBQSxFQUNBLFNDekVBLElBQUFILGdCQUFBUCxRQUFBQyxPQUFBLGlCQUVBTSxnQkFBQUQsV0FBQSx5QkFBQSxTQUFBLHNCQUFBLFNBQUFFLEVBQUEwQyxHQUNBQSxFQUFBVixTQUFBMUIsS0FBQSxTQUFBRixHQUNBQSxFQUFBQSxLQUFBdUMsUUFBQUMsUUFBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUNBQSxFQUFBRCxHQUFBRSxZQUFBLEdBQUFDLE1BQUFKLEVBQUFLLE1BQUFDLFVBQ0FKLEVBQUFELEdBQUFNLFdBQUEsR0FBQUgsTUFBQUosRUFBQUssTUFBQUcsbUJBQ0EsU0FDQUMsUUFBQSxPQUNBQyxLQUFBLFVBQ0FDLE1BQUEsT0FDQUMsSUFBQSxjQUdBekQsRUFBQTBELFdBQUF0RCxFQUFBQSxLQUFBdUMsYUFLQTVDLGVBQUFELFdBQUEsMEJBQUEsU0FBQSxlQUFBLHNCQUFBLFlBQUEsU0FBQUUsRUFBQVcsRUFBQStCLEVBQUFQLEdBQ0FPLEVBQUE5QixJQUFBRCxFQUFBRSxJQUFBUCxLQUFBLFNBQUFGLEdBQ0FBLEVBQUFBLEtBQUF1RCxNQUFBWCxZQUFBLEdBQUFDLE1BQUE3QyxFQUFBQSxLQUFBdUQsTUFBQVQsTUFBQUMsVUFDQS9DLEVBQUFBLEtBQUF1RCxNQUFBUCxXQUFBLEdBQUFILE1BQUE3QyxFQUFBQSxLQUFBdUQsTUFBQVQsTUFBQUcsbUJBQ0EsU0FDQUMsUUFBQSxPQUNBQyxLQUFBLFVBQ0FDLE1BQUEsT0FDQUMsSUFBQSxZQUVBekQsRUFBQTRELFVBQUF4RCxFQUFBQSxLQUFBdUQsUUFHQTNELEVBQUFzQyxXQUFBLFNBQUF6QixHQUNBNkIsRUFBQUYsT0FBQTNCLEdBQUFQLEtBQUEsU0FBQUYsR0FDQUEsRUFBQUEsS0FBQUcsU0FDQTRCLEVBQUFNLEtBQUEsNEJBV0ExQyxlQUFBRCxXQUFBLDBCQUFBLFNBQUEsc0JBQUEsa0JBQUEsWUFBQSxTQUFBRSxFQUFBMEMsRUFBQXpDLEVBQUFrQyxHQUNBbkMsRUFBQTZELG1CQUNBN0QsRUFBQThELHFCQUNBQyxxQkFBQSxFQUNBQyxrQkFFQWhFLEVBQUFpRSxXQUFBLEVBRUFoRSxFQUFBaUUsZ0JBQUE1RCxLQUFBLFNBQUFGLEdBQ0FKLEVBQUFtRSxXQUFBL0QsRUFBQUEsS0FBQWdFLFdBR0FwRSxFQUFBcUUsUUFBQSxTQUFBQyxHQUNBLFFBQUFBLE9BSUFyRSxHQUFBc0UsTUFDQUMsS0FBQUYsRUFBQUUsS0FDQUMsTUFBQUgsRUFBQUcsTUFDQUMsS0FBQUosRUFBQUksT0FDQXBFLEtBQUEsU0FBQUYsR0FDQSxHQUFBdUUsR0FBQXZFLEVBQUFBLEtBQUFVLEtBR0E4RCxHQUNBL0QsR0FBQThELEVBQUF0QyxJQUNBcUMsS0FBQUMsRUFBQUQsS0FDQUQsTUFBQUUsRUFBQUYsTUFDQUQsS0FBQUcsRUFBQUgsS0FDQUssa0JBQUFGLEVBQUFFLGtCQUNBQyxhQUFBUixFQUFBUyxZQUNBQyxlQUFBVixFQUFBUyxZQUFBSixFQUFBRSxrQkFHQTdFLEdBQUE4RCxvQkFBQUUsY0FBQWlCLE9BSUFqRixFQUFBOEQsb0JBQUFFLGNBQUFwQixRQUFBLFNBQUFzQyxFQUFBcEMsRUFBQUMsR0FDQW1DLEVBQUFyRSxLQUFBK0QsRUFBQS9ELEtBQ0FxRSxFQUFBSixjQUFBRixFQUFBRSxhQUNBSSxFQUFBRixnQkFBQVYsRUFBQVMsWUFBQUosRUFBQUUsa0JBQ0E3RSxFQUFBaUUsV0FBQSxLQUlBakUsRUFBQWlFLFVBR0FqRSxFQUFBaUUsV0FBQSxFQUZBakUsRUFBQThELG9CQUFBRSxjQUFBaUIsS0FBQUwsR0FLQTVFLEVBQUE4RCxvQkFBQUMsc0JBQUFZLEVBQUFFLGtCQUNBUCxFQUFBUyxZQUNBL0UsRUFBQTZELHNCQUlBN0QsRUFBQW1GLFVBQUEsU0FBQXhCLEdBQ0FqQixFQUFBckMsT0FBQXNELEdBQUFyRCxLQUFBLFNBQUFGLEdBQ0FBLEVBQUFBLEtBQUFHLFNBQ0E0QixFQUFBTSxLQUFBLDRCQU9BMUMsZUFBQUQsV0FBQSx3QkFBQSxTQUFBLHNCQUFBLGVBQUEsa0JBQUEsWUFBQSxTQUFBRSxFQUFBMEMsRUFBQS9CLEVBQUFWLEVBQUFrQyxHQUNBTyxFQUFBOUIsSUFBQUQsRUFBQUUsSUFBQVAsS0FBQSxTQUFBRixHQUNBSixFQUFBMkQsTUFBQXZELEVBQUFBLEtBQUF1RCxRQUlBMUQsRUFBQWlFLGdCQUFBNUQsS0FBQSxTQUFBRixHQUNBSixFQUFBbUUsV0FBQS9ELEVBQUFBLEtBQUFnRSxXQUdBcEUsRUFBQTZELG1CQUNBN0QsRUFBQWlFLFdBQUEsRUFFQWpFLEVBQUFxRSxRQUFBLFNBQUFDLEdBQ0EsUUFBQUEsT0FJQXJFLEdBQUFzRSxNQUNBQyxLQUFBRixFQUFBRSxLQUNBQyxNQUFBSCxFQUFBRyxNQUNBQyxLQUFBSixFQUFBSSxPQUNBcEUsS0FBQSxTQUFBRixHQUNBLEdBQUF1RSxHQUFBdkUsRUFBQUEsS0FBQVUsS0FHQThELEdBQ0EvRCxHQUFBOEQsRUFBQXRDLElBQ0FxQyxLQUFBQyxFQUFBRCxLQUNBRCxNQUFBRSxFQUFBRixNQUNBRCxLQUFBRyxFQUFBSCxLQUNBSyxrQkFBQUYsRUFBQUUsa0JBQ0FDLGFBQUFSLEVBQUFTLFlBQ0FDLGVBQUFWLEVBQUFTLFlBQUFKLEVBQUFFLGtCQUdBN0UsR0FBQTJELE1BQUFLLGNBQUFpQixPQUlBakYsRUFBQTJELE1BQUFLLGNBQUFwQixRQUFBLFNBQUFzQyxFQUFBcEMsRUFBQUMsR0FDQW1DLEVBQUFyRSxLQUFBK0QsRUFBQS9ELEtBQ0FxRSxFQUFBSixjQUFBRixFQUFBRSxhQUNBSSxFQUFBRixnQkFBQVYsRUFBQVMsWUFBQUosRUFBQUUsa0JBQ0E3RSxFQUFBaUUsV0FBQSxLQUlBakUsRUFBQWlFLFVBR0FqRSxFQUFBaUUsV0FBQSxFQUZBakUsRUFBQTJELE1BQUFLLGNBQUFpQixLQUFBTCxHQUtBNUUsRUFBQTJELE1BQUFJLHNCQUFBWSxFQUFBRSxrQkFDQVAsRUFBQVMsWUFDQS9FLEVBQUE2RCxzQkFJQTdELEVBQUFtRixVQUFBLFNBQUFDLEVBQUF4QixHQUNBcEQsUUFBQUMsSUFBQTJFLEdBQ0E1RSxRQUFBQyxJQUFBbUQsR0FDQWxCLEVBQUFYLE9BQUFxRCxFQUFBeEIsR0FBQXRELEtBQUEsU0FBQUYsR0FDQUEsRUFBQUEsS0FBQUcsU0FDQTRCLEVBQUFNLEtBQUEsNEJDcExBakQsUUFBQUMsT0FBQSxrQkFBQUssV0FBQSxZQUFBLFNBQUEsa0JBQUEsU0FBQUUsRUFBQUMsT0NDQVQsUUFBQUMsT0FBQSxrQkFBQTRGLFFBQUEsbUJBQUEsUUFBQSxTQUFBQyxHQUVBLE9BR0F0RCxPQUFBLFdBQ0EsTUFBQXNELEdBQUExRSxJQUFBLGtCQUlBUCxPQUFBLFNBQUErQixHQUNBLE1BQUFrRCxHQUFBQyxLQUFBLGdCQUFBbkQsSUFJQXhCLElBQUEsU0FBQTRFLEdBQ0EsTUFBQUYsR0FBQTFFLElBQUEsaUJBQUE0RSxJQUlBekQsT0FBQSxTQUFBeUQsRUFBQXBELEdBQ0EsTUFBQWtELEdBQUFHLElBQUEsaUJBQUFELEVBQUFwRCxJQUlBSSxPQUFBLFNBQUFnRCxHQUNBLE1BQUFGLEdBQUFJLE9BQUEsaUJBQUFGLElBSUFqQixLQUFBLFNBQUFuRSxHQUNBLE1BQUFrRixJQUNBSyxJQUFBLHFCQUNBQyxPQUFBLE1BQ0FDLFFBQ0FuQixLQUFBdEUsRUFBQXNFLEtBQ0FELE1BQUFyRSxFQUFBcUUsTUFDQUQsS0FBQXBFLEVBQUFvRSxTQUtBTixjQUFBLFdBQ0EsTUFBQW9CLEdBQUExRSxJQUFBLCtCQzVDQXBCLFFBQUFDLE9BQUEsa0JBQUE0RixRQUFBLHVCQUFBLFFBQUEsU0FBQUMsR0FXQSxPQUNBdEQsT0FBQSxXQUNBLE1BQUFzRCxHQUFBMUUsSUFBQSxrQkFHQVAsT0FBQSxTQUFBdUQsR0FDQSxNQUFBMEIsR0FBQUMsS0FBQSxnQkFBQTNCLElBR0FoRCxJQUFBLFNBQUF3RSxHQUNBLE1BQUFFLEdBQUExRSxJQUFBLGlCQUFBd0UsSUFHQXJELE9BQUEsU0FBQXFELEVBQUF4QixHQUNBLE1BQUEwQixHQUFBRyxJQUFBLGlCQUFBTCxFQUFBeEIsSUFHQXBCLE9BQUEsU0FBQTRDLEdBQ0EsTUFBQUUsR0FBQUksT0FBQSxpQkFBQU4iLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoXCJGb29kSm91cm5hbEFwcFwiLCBbXHJcbiAgICBcIm5nUm91dGVcIlxyXG5dKTsiLCJhbmd1bGFyLm1vZHVsZShcIkZvb2RKb3VybmFsQXBwXCIpLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpIHtcclxuXHJcbiAgICAvLyBGb29kIEl0ZW0gUm91dGVzXHJcbiAgICAkcm91dGVQcm92aWRlclxyXG5cclxuICAgICAgICAud2hlbihcIi9cIiwge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvdmlld3MvcGFnZXMvaG9tZS5odG1sXCIsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwibWFpbkN0cmxcIlxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIC53aGVuKFwiL2FsbEZvb2RJdGVtc1wiLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcImFwcC92aWV3cy9wYWdlcy9mb29kaXRlbXBhZ2VzL2FsbEZvb2RJdGVtcy5odG1sXCIsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwiYWxsRm9vZEl0ZW1zQ3RybFwiXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy8gPyAtIE1ha2VzIHBhcmFtZXRlciBvcHRpb25hbFxyXG4gICAgICAgIC53aGVuKFwiL3NpbmdsZUZvb2RJdGVtLzppZD9cIiwge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvdmlld3MvcGFnZXMvZm9vZGl0ZW1wYWdlcy9zaW5nbGVGb29kSXRlbS5odG1sXCIsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwic2luZ2xlRm9vZEl0ZW1DdHJsXCIgXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLndoZW4oXCIvY3JlYXRlRm9vZEl0ZW1cIiwge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvdmlld3MvcGFnZXMvZm9vZGl0ZW1wYWdlcy9jcmVhdGVGb29kSXRlbS5odG1sXCIsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwiY3JlYXRlRm9vZEl0ZW1DdHJsXCIgXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLndoZW4oXCIvZWRpdEZvb2RJdGVtLzppZD9cIiwge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvdmlld3MvcGFnZXMvZm9vZGl0ZW1wYWdlcy9lZGl0Rm9vZEl0ZW0uaHRtbFwiLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBcImVkaXRGb29kSXRlbUN0cmxcIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICRyb3V0ZVByb3ZpZGVyXHJcblxyXG4gICAgICAgIC53aGVuKFwiL2FsbEpvdXJuYWxFbnRyaWVzXCIsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiYXBwL3ZpZXdzL3BhZ2VzL2pvdXJuYWxlbnRyeXBhZ2VzL2FsbEpvdXJuYWxFbnRyaWVzLmh0bWxcIixcclxuICAgICAgICAgICAgY29udHJvbGxlcjogXCJhbGxKb3VybmFsRW50cmllc0N0cmxcIlxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIC53aGVuKFwiL2NyZWF0ZUpvdXJuYWxFbnRyeVwiLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcImFwcC92aWV3cy9wYWdlcy9qb3VybmFsZW50cnlwYWdlcy9jcmVhdGVKb3VybmFsRW50cnkuaHRtbFwiLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBcImNyZWF0ZUpvdXJuYWxFbnRyeUN0cmxcIlxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIC53aGVuKFwiL2VkaXRKb3VybmFsRW50cnkvOmlkP1wiLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcImFwcC92aWV3cy9wYWdlcy9qb3VybmFsZW50cnlwYWdlcy9lZGl0Sm91cm5hbEVudHJ5Lmh0bWxcIixcclxuICAgICAgICAgICAgY29udHJvbGxlcjogXCJlZGl0Sm91cm5hbEVudHJ5Q3RybFwiXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLndoZW4oXCIvc2luZ2xlSm91cm5hbEVudHJ5LzppZD9cIiwge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvdmlld3MvcGFnZXMvam91cm5hbGVudHJ5cGFnZXMvc2luZ2xlSm91cm5hbEVudHJ5Lmh0bWxcIixcclxuICAgICAgICAgICAgY29udHJvbGxlcjogXCJzaW5nbGVKb3VybmFsRW50cnlDdHJsXCJcclxuICAgICAgICB9KTtcclxuXHJcbn0pOyIsInZhciBmb29kSm91cm5hbEFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiRm9vZEpvdXJuYWxBcHBcIik7XHJcblxyXG5mb29kSm91cm5hbEFwcC5jb250cm9sbGVyKFwiY3JlYXRlRm9vZEl0ZW1DdHJsXCIsIGZ1bmN0aW9uICgkc2NvcGUsIEZvb2RJdGVtU2VydmljZSkge1xyXG4gICAgJHNjb3BlLnN0YXR1cyA9IFwidW5zZXRcIjtcclxuICAgICRzY29wZS5uZXdJdGVtID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnN0YXR1cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEZvb2RJdGVtU2VydmljZS5jcmVhdGUoZGF0YSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoIWRhdGEuZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEuZXJyb3IpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnN0YXR1cyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn0pO1xyXG5cclxuZm9vZEpvdXJuYWxBcHAuY29udHJvbGxlcihcImVkaXRGb29kSXRlbUN0cmxcIiwgZnVuY3Rpb24gKCRzY29wZSwgJHJvdXRlUGFyYW1zLCBGb29kSXRlbVNlcnZpY2UpIHtcclxuICAgICRzY29wZS5zdGF0dXMgPSBcInVuc2V0XCI7XHJcblxyXG4gICAgRm9vZEl0ZW1TZXJ2aWNlLmdldCgkcm91dGVQYXJhbXMuaWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICB2YXIgaXRlbSA9IGRhdGEuZGF0YS5pdGVtO1xyXG5cclxuICAgICAgICAkc2NvcGUuZWRpdHRlZEZvb2RJdGVtRGF0YSA9IGl0ZW07XHJcbiAgICAgICAgJHNjb3BlLmVkaXR0ZWRGb29kSXRlbURhdGEuZW5lcmd5ID0gaXRlbS50eXBpY2FsX251dHJpdGlvbmFsX2luZm9ybWF0aW9uLmVuZXJneTtcclxuICAgICAgICAkc2NvcGUuZWRpdHRlZEZvb2RJdGVtRGF0YS5wcm90ZWluID0gaXRlbS50eXBpY2FsX251dHJpdGlvbmFsX2luZm9ybWF0aW9uLnByb3RlaW47XHJcbiAgICAgICAgJHNjb3BlLmVkaXR0ZWRGb29kSXRlbURhdGEudG90YWxfY2FyYnMgPSBpdGVtLnR5cGljYWxfbnV0cml0aW9uYWxfaW5mb3JtYXRpb24uY2FyYm9oeWRyYXRlcy50b3RhbDtcclxuICAgICAgICAkc2NvcGUuZWRpdHRlZEZvb2RJdGVtRGF0YS50b3RhbF9zdWdhciA9IGl0ZW0udHlwaWNhbF9udXRyaXRpb25hbF9pbmZvcm1hdGlvbi5jYXJib2h5ZHJhdGVzLnRvdGFsX3N1Z2FyO1xyXG4gICAgICAgICRzY29wZS5lZGl0dGVkRm9vZEl0ZW1EYXRhLnRvdGFsX2ZhdCA9IGl0ZW0udHlwaWNhbF9udXRyaXRpb25hbF9pbmZvcm1hdGlvbi5mYXQudG90YWw7XHJcbiAgICAgICAgJHNjb3BlLmVkaXR0ZWRGb29kSXRlbURhdGEuc2F0dXJhdGVkID0gaXRlbS50eXBpY2FsX251dHJpdGlvbmFsX2luZm9ybWF0aW9uLmZhdC5zYXR1cmF0ZWQ7XHJcbiAgICAgICAgJHNjb3BlLmVkaXR0ZWRGb29kSXRlbURhdGEudHJhbnMgPSBpdGVtLnR5cGljYWxfbnV0cml0aW9uYWxfaW5mb3JtYXRpb24uZmF0LnRyYW5zO1xyXG4gICAgICAgICRzY29wZS5lZGl0dGVkRm9vZEl0ZW1EYXRhLm1vbm9fdW5zYXR1cmF0ZWQgPSBpdGVtLnR5cGljYWxfbnV0cml0aW9uYWxfaW5mb3JtYXRpb24uZmF0Lm1vbm9fdW5zYXR1cmF0ZWQ7XHJcbiAgICAgICAgJHNjb3BlLmVkaXR0ZWRGb29kSXRlbURhdGEucG9seV91bnNhdHVyYXRlZCA9IGl0ZW0udHlwaWNhbF9udXRyaXRpb25hbF9pbmZvcm1hdGlvbi5mYXQucG9seV91bnNhdHVyYXRlZDtcclxuICAgIH0pO1xyXG5cclxuICAgICRzY29wZS5zYXZlSXRlbSA9IGZ1bmN0aW9uIChlZGl0dGVkRGF0YSkge1xyXG4gICAgICAgIEZvb2RJdGVtU2VydmljZS51cGRhdGUoJHJvdXRlUGFyYW1zLmlkLCBlZGl0dGVkRGF0YSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zdGF0dXMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIWRhdGEuZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEuZXJyb3IpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnN0YXR1cyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn0pO1xyXG5cclxuZm9vZEpvdXJuYWxBcHAuY29udHJvbGxlcihcImFsbEZvb2RJdGVtc0N0cmxcIiwgZnVuY3Rpb24gKCRzY29wZSwgRm9vZEl0ZW1TZXJ2aWNlKSB7XHJcbiAgICBGb29kSXRlbVNlcnZpY2UuZ2V0QWxsKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICRzY29wZS5hbGwgPSBkYXRhLmRhdGEuaXRlbXM7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5mb29kSm91cm5hbEFwcC5jb250cm9sbGVyKFwic2luZ2xlRm9vZEl0ZW1DdHJsXCIsIGZ1bmN0aW9uICgkc2NvcGUsICRyb3V0ZVBhcmFtcywgRm9vZEl0ZW1TZXJ2aWNlLCAkbG9jYXRpb24pIHtcclxuICAgICRzY29wZS5zdGF0dXMgPSBcInVuc2V0XCI7XHJcblxyXG4gICAgRm9vZEl0ZW1TZXJ2aWNlLmdldCgkcm91dGVQYXJhbXMuaWQpLnRoZW4oZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAkc2NvcGUuZm9vZEl0ZW1EYXRhID0gaXRlbS5kYXRhLml0ZW07XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJJRDogXCIgKyAkc2NvcGUuZm9vZEl0ZW1EYXRhLl9pZCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkc2NvcGUucmVtb3ZlSXRlbSA9IGZ1bmN0aW9uIChpdGVtSWQpIHtcclxuICAgICAgICBpZiAoIWl0ZW1JZCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgRm9vZEl0ZW1TZXJ2aWNlLnJlbW92ZShpdGVtSWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKCFkYXRhLmRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnN0YXR1cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhLmVycm9yKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2FsbEZvb2RJdGVtc1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufSk7IiwidmFyIGZvb2RKb3VybmFsQXBwICA9IGFuZ3VsYXIubW9kdWxlKFwiRm9vZEpvdXJuYWxBcHBcIik7XHJcblxyXG5mb29kSm91cm5hbEFwcC5jb250cm9sbGVyKFwiYWxsSm91cm5hbEVudHJpZXNDdHJsXCIsIGZ1bmN0aW9uICgkc2NvcGUsIEpvdXJuYWxFbnRyeVNlcnZpY2UpIHtcclxuICAgIEpvdXJuYWxFbnRyeVNlcnZpY2UuZ2V0QWxsKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIGRhdGEuZGF0YS5lbnRyaWVzLmZvckVhY2goZnVuY3Rpb24gKHZhbCwgaW5kZXgsIGFycmF5KSB7XHJcbiAgICAgICAgICAgIGFycmF5W2luZGV4XS50aW1lQ3JlYXRlZCA9IG5ldyBEYXRlKHZhbC5kYXRlKS5nZXRUaW1lKClcclxuICAgICAgICAgICAgYXJyYXlbaW5kZXhdLmRhdGVTdHJpbmcgPSBuZXcgRGF0ZSh2YWwuZGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKFxyXG4gICAgICAgICAgICAgICAgXCJlbi1VU1wiLCBcclxuICAgICAgICAgICAgICAgIHsgd2Vla2RheTogJ2xvbmcnLFxyXG4gICAgICAgICAgICAgICAgICB5ZWFyOiAnbnVtZXJpYycsXHJcbiAgICAgICAgICAgICAgICAgIG1vbnRoOiAnbG9uZycsXHJcbiAgICAgICAgICAgICAgICAgIGRheTogJ251bWVyaWMnIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkc2NvcGUuYWxsRW50cmllcyA9IGRhdGEuZGF0YS5lbnRyaWVzO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuLy8gSGVhcyB0byByZXRyaWV2ZSB0aGUgam91cm5hbCBlbnRyeSB3aG8ncyBpZCBpcyBwYXNzZWQgYXMgYSByb3V0ZXBhcmFtZXRlci5cclxuZm9vZEpvdXJuYWxBcHAuY29udHJvbGxlcihcInNpbmdsZUpvdXJuYWxFbnRyeUN0cmxcIiwgZnVuY3Rpb24gKCRzY29wZSwgJHJvdXRlUGFyYW1zLCBKb3VybmFsRW50cnlTZXJ2aWNlLCAkbG9jYXRpb24pIHtcclxuICAgIEpvdXJuYWxFbnRyeVNlcnZpY2UuZ2V0KCRyb3V0ZVBhcmFtcy5pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIGRhdGEuZGF0YS5lbnRyeS50aW1lQ3JlYXRlZCA9IG5ldyBEYXRlKGRhdGEuZGF0YS5lbnRyeS5kYXRlKS5nZXRUaW1lKClcclxuICAgICAgICBkYXRhLmRhdGEuZW50cnkuZGF0ZVN0cmluZyA9IG5ldyBEYXRlKGRhdGEuZGF0YS5lbnRyeS5kYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoXHJcbiAgICAgICAgICAgIFwiZW4tVVNcIiwgXHJcbiAgICAgICAgICAgIHsgd2Vla2RheTogJ2xvbmcnLFxyXG4gICAgICAgICAgICAgIHllYXI6ICdudW1lcmljJyxcclxuICAgICAgICAgICAgICBtb250aDogJ2xvbmcnLFxyXG4gICAgICAgICAgICAgIGRheTogJ251bWVyaWMnIFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRzY29wZS5lbnRyeURhdGEgPSBkYXRhLmRhdGEuZW50cnk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkc2NvcGUucmVtb3ZlSXRlbSA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIEpvdXJuYWxFbnRyeVNlcnZpY2UucmVtb3ZlKGlkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvYWxsSm91cm5hbEVudHJpZXNcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn0pO1xyXG5cclxuLy8gc2F2ZUVudHJ5KCkgLSBzYXZlIHRoZSBqb3VybmFsIGVudHJ5IGRhdGEgdG8gZGF0YWJhc2UuXHJcbi8vICRzY29wZS5jYXRlZ29yaWVzIC0gY29udGFpbnMgYWxsIHRoZSBicmFuZHMsIHR5cGVzLCBhbmQgbmFtZXMgaW4gZGF0YWJhc2UgdXNlZFxyXG4vLyB0byBmaW5kIGEgZm9vZCBpdGVtIHVzZXIgc3BlY2lmaWVkLlxyXG4vLyBVcGRhdGUgdG90YWxfY2Fsb3JpZXMgZWF0ZW4gZXZlcnkgdGltZSBpbnB1dCBpcyBjaGFuZ2VkLlxyXG4vLyBIYXMgdG8gdXBkYXRlIHRoZSBkb20gd2hlbiBhIG5ldyBmb29kIGl0ZW0gaXMgYWRkZWQgdG8gdGhlIGVudHJ5LlxyXG5mb29kSm91cm5hbEFwcC5jb250cm9sbGVyKFwiY3JlYXRlSm91cm5hbEVudHJ5Q3RybFwiLCBmdW5jdGlvbiAoJHNjb3BlLCBKb3VybmFsRW50cnlTZXJ2aWNlLCBGb29kSXRlbVNlcnZpY2UsICRsb2NhdGlvbikge1xyXG4gICAgJHNjb3BlLm5ld0Zvb2RJdGVtRGF0YT0ge307XHJcbiAgICAkc2NvcGUubmV3Sm91cm5hbEVudHJ5RGF0YSA9IHtcclxuICAgICAgICB0b3RhbF9jYWxvcmllc19lYXRlbjogMCxcclxuICAgICAgICBmb29kX2NvbnN1bWVkOiBbXVxyXG4gICAgfTtcclxuICAgICRzY29wZS5jb250YWluZWQgPSBmYWxzZTtcclxuXHJcbiAgICBGb29kSXRlbVNlcnZpY2UuZ2V0Q2F0ZWdvcmllcygpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IGRhdGEuZGF0YS5tZXRhZGF0YTtcclxuICAgIH0pO1xyXG5cclxuICAgICRzY29wZS5hZGRJdGVtID0gZnVuY3Rpb24gKG5ld0Zvb2RJdGVtKSB7XHJcbiAgICAgICAgaWYgKCFuZXdGb29kSXRlbSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBGb29kSXRlbVNlcnZpY2UuZmluZCh7XHJcbiAgICAgICAgICAgIHR5cGU6IG5ld0Zvb2RJdGVtLnR5cGUsXHJcbiAgICAgICAgICAgIGJyYW5kOiBuZXdGb29kSXRlbS5icmFuZCxcclxuICAgICAgICAgICAgbmFtZTogbmV3Rm9vZEl0ZW0ubmFtZVxyXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIGZvb2RJdGVtID0gZGF0YS5kYXRhLml0ZW07XHJcblxyXG4gICAgICAgICAgICAvLyBOZXdseSBhZGRlZCBGb29kIEl0ZW1cclxuICAgICAgICAgICAgdmFyIG5ld0Zvb2RDb25zdW1lZCA9IHtcclxuICAgICAgICAgICAgICAgIGlkOiBmb29kSXRlbS5faWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBmb29kSXRlbS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgYnJhbmQ6IGZvb2RJdGVtLmJyYW5kLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogZm9vZEl0ZW0udHlwZSxcclxuICAgICAgICAgICAgICAgIGNhbG9yaWVzX3Blcl9ncmFtOiBmb29kSXRlbS5jYWxvcmllc19wZXJfZ3JhbSxcclxuICAgICAgICAgICAgICAgIGFtb3VudF9lYXRlbjogbmV3Rm9vZEl0ZW0uZ3JhbXNfZWF0ZW4sXHJcbiAgICAgICAgICAgICAgICBjYWxvcmllc19lYXRlbjogKG5ld0Zvb2RJdGVtLmdyYW1zX2VhdGVuICogZm9vZEl0ZW0uY2Fsb3JpZXNfcGVyX2dyYW0pXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUubmV3Sm91cm5hbEVudHJ5RGF0YS5mb29kX2NvbnN1bWVkLnB1c2goKTtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIGZvb2RfY29tc3VtZWQgYWxyZWFkeSBjb250YWlucyB0aGUgZm9vZCBkYXRhIGZvciB0aGlzIHBhcnRpY3VsYXIgaXRlbVxyXG4gICAgICAgICAgICAvLyB1cGRhdGUgcmF0aGVyIHRoYW4gcHVzaC5cclxuICAgICAgICAgICAgJHNjb3BlLm5ld0pvdXJuYWxFbnRyeURhdGEuZm9vZF9jb25zdW1lZC5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgsIGFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuaWQgPT09IG5ld0Zvb2RDb25zdW1lZC5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLmFtb3VudF9lYXRlbiArPSBuZXdGb29kQ29uc3VtZWQuYW1vdW50X2VhdGVuO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLmNhbG9yaWVzX2VhdGVuICs9IChuZXdGb29kSXRlbS5ncmFtc19lYXRlbiAqIGZvb2RJdGVtLmNhbG9yaWVzX3Blcl9ncmFtKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29udGFpbmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoISRzY29wZS5jb250YWluZWQpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5uZXdKb3VybmFsRW50cnlEYXRhLmZvb2RfY29uc3VtZWQucHVzaChuZXdGb29kQ29uc3VtZWQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNvbnRhaW5lZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAkc2NvcGUubmV3Sm91cm5hbEVudHJ5RGF0YS50b3RhbF9jYWxvcmllc19lYXRlbiArPSAoZm9vZEl0ZW0uY2Fsb3JpZXNfcGVyX2dyYW0gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIG5ld0Zvb2RJdGVtLmdyYW1zX2VhdGVuKTtcclxuICAgICAgICAgICAgJHNjb3BlLm5ld0Zvb2RJdGVtRGF0YT0ge307XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zYXZlRW50cnkgPSBmdW5jdGlvbiAoZW50cnkpIHtcclxuICAgICAgICBKb3VybmFsRW50cnlTZXJ2aWNlLmNyZWF0ZShlbnRyeSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5kYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2FsbEpvdXJuYWxFbnRyaWVzXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59KTtcclxuXHJcbi8vIHNhdmVFbnRyeSgpIC0gU2F2ZXMgdGhlIGNoYW5nZXMgbWFkZSB0byBlbnRyeS5cclxuZm9vZEpvdXJuYWxBcHAuY29udHJvbGxlcihcImVkaXRKb3VybmFsRW50cnlDdHJsXCIsIGZ1bmN0aW9uICgkc2NvcGUsIEpvdXJuYWxFbnRyeVNlcnZpY2UsICRyb3V0ZVBhcmFtcywgRm9vZEl0ZW1TZXJ2aWNlLCAkbG9jYXRpb24pIHtcclxuICAgIEpvdXJuYWxFbnRyeVNlcnZpY2UuZ2V0KCRyb3V0ZVBhcmFtcy5pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICRzY29wZS5lbnRyeSA9IGRhdGEuZGF0YS5lbnRyeTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFVzZWQgZm9yIHRoZSBkcm9wZG93biBtZW51cyB3aGVuIGFkZGluZyBhIG5ldyBmb29kIGl0ZW0uXHJcbiAgICBGb29kSXRlbVNlcnZpY2UuZ2V0Q2F0ZWdvcmllcygpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IGRhdGEuZGF0YS5tZXRhZGF0YTtcclxuICAgIH0pO1xyXG5cclxuICAgICRzY29wZS5uZXdGb29kSXRlbURhdGE9IHt9OyAvLyBVc2VkIGJ5IGZvcm1cclxuICAgICRzY29wZS5jb250YWluZWQgPSBmYWxzZTtcclxuXHJcbiAgICAkc2NvcGUuYWRkSXRlbSA9IGZ1bmN0aW9uIChuZXdGb29kSXRlbSkge1xyXG4gICAgICAgIGlmICghbmV3Rm9vZEl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgRm9vZEl0ZW1TZXJ2aWNlLmZpbmQoe1xyXG4gICAgICAgICAgICB0eXBlOiBuZXdGb29kSXRlbS50eXBlLFxyXG4gICAgICAgICAgICBicmFuZDogbmV3Rm9vZEl0ZW0uYnJhbmQsXHJcbiAgICAgICAgICAgIG5hbWU6IG5ld0Zvb2RJdGVtLm5hbWVcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciBmb29kSXRlbSA9IGRhdGEuZGF0YS5pdGVtO1xyXG5cclxuICAgICAgICAgICAgLy8gTmV3bHkgYWRkZWQgRm9vZCBJdGVtXHJcbiAgICAgICAgICAgIHZhciBuZXdGb29kQ29uc3VtZWQgPSB7XHJcbiAgICAgICAgICAgICAgICBpZDogZm9vZEl0ZW0uX2lkLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogZm9vZEl0ZW0ubmFtZSxcclxuICAgICAgICAgICAgICAgIGJyYW5kOiBmb29kSXRlbS5icmFuZCxcclxuICAgICAgICAgICAgICAgIHR5cGU6IGZvb2RJdGVtLnR5cGUsXHJcbiAgICAgICAgICAgICAgICBjYWxvcmllc19wZXJfZ3JhbTogZm9vZEl0ZW0uY2Fsb3JpZXNfcGVyX2dyYW0sXHJcbiAgICAgICAgICAgICAgICBhbW91bnRfZWF0ZW46IG5ld0Zvb2RJdGVtLmdyYW1zX2VhdGVuLFxyXG4gICAgICAgICAgICAgICAgY2Fsb3JpZXNfZWF0ZW46IChuZXdGb29kSXRlbS5ncmFtc19lYXRlbiAqIGZvb2RJdGVtLmNhbG9yaWVzX3Blcl9ncmFtKVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmVudHJ5LmZvb2RfY29uc3VtZWQucHVzaCgpO1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgZm9vZF9jb21zdW1lZCBhbHJlYWR5IGNvbnRhaW5zIHRoZSBmb29kIGRhdGEgZm9yIHRoaXMgcGFydGljdWxhciBpdGVtXHJcbiAgICAgICAgICAgIC8vIHVwZGF0ZSByYXRoZXIgdGhhbiBwdXNoLlxyXG4gICAgICAgICAgICAkc2NvcGUuZW50cnkuZm9vZF9jb25zdW1lZC5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgsIGFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuaWQgPT09IG5ld0Zvb2RDb25zdW1lZC5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLmFtb3VudF9lYXRlbiArPSBuZXdGb29kQ29uc3VtZWQuYW1vdW50X2VhdGVuO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLmNhbG9yaWVzX2VhdGVuICs9IChuZXdGb29kSXRlbS5ncmFtc19lYXRlbiAqIGZvb2RJdGVtLmNhbG9yaWVzX3Blcl9ncmFtKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29udGFpbmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoISRzY29wZS5jb250YWluZWQpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5lbnRyeS5mb29kX2NvbnN1bWVkLnB1c2gobmV3Rm9vZENvbnN1bWVkKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jb250YWluZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgJHNjb3BlLmVudHJ5LnRvdGFsX2NhbG9yaWVzX2VhdGVuICs9IChmb29kSXRlbS5jYWxvcmllc19wZXJfZ3JhbSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogbmV3Rm9vZEl0ZW0uZ3JhbXNfZWF0ZW4pO1xyXG4gICAgICAgICAgICAkc2NvcGUubmV3Rm9vZEl0ZW1EYXRhPSB7fTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNhdmVFbnRyeSA9IGZ1bmN0aW9uIChlbnRyeUlkLCBlbnRyeURhdGEpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlbnRyeUlkKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhlbnRyeURhdGEpO1xyXG4gICAgICAgIEpvdXJuYWxFbnRyeVNlcnZpY2UudXBkYXRlKGVudHJ5SWQsIGVudHJ5RGF0YSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5kYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2FsbEpvdXJuYWxFbnRyaWVzXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59KTsiLCJhbmd1bGFyLm1vZHVsZShcIkZvb2RKb3VybmFsQXBwXCIpLmNvbnRyb2xsZXIoXCJtYWluQ3RybFwiLCBmdW5jdGlvbiAoJHNjb3BlLCBGb29kSXRlbVNlcnZpY2UpIHtcclxufSk7IiwiLy8gRm9vZEl0ZW1TZXJ2aWNlIGlzIHByaW1hcmlseSB1c2VkIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIGJhY2sgZW5kLlxyXG5hbmd1bGFyLm1vZHVsZShcIkZvb2RKb3VybmFsQXBwXCIpLmZhY3RvcnkoXCJGb29kSXRlbVNlcnZpY2VcIiwgZnVuY3Rpb24gKCRodHRwKSB7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuXHJcbiAgICAgICAgLy8gUmV0dXJucyBhbiBhcnJheSB3aXRoIGFsbCBmb29kIGl0ZW1zLlxyXG4gICAgICAgIGdldEFsbDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KFwiL2FwaS9mb29kaXRlbVwiKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgZm9vZCBpdGVtLlxyXG4gICAgICAgIGNyZWF0ZTogZnVuY3Rpb24gKGZvb2RJdGVtRGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdChcIi9hcGkvZm9vZGl0ZW1cIiwgZm9vZEl0ZW1EYXRhKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvLyBSZXR1cm5zIHRoZSBkYXRhIGZvciBhIHNwZWNpZmljIGZvb2QgaXRlbS5cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIChmb29kSXRlbUlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoXCIvYXBpL2Zvb2RpdGVtL1wiICsgZm9vZEl0ZW1JZCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBkYXRhIG9mIGEgc3BlY2lmaWMgZm9vZCBpdGVtLlxyXG4gICAgICAgIHVwZGF0ZTogZnVuY3Rpb24gKGZvb2RJdGVtSWQsIGZvb2RJdGVtRGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucHV0KFwiL2FwaS9mb29kaXRlbS9cIiArIGZvb2RJdGVtSWQsIGZvb2RJdGVtRGF0YSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIGEgc3BlY2lmaWMgZm9vZCBpdGVtIGZyb20gZGF0YWJhc2UuXHJcbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAoZm9vZEl0ZW1JZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKFwiL2FwaS9mb29kaXRlbS9cIiArIGZvb2RJdGVtSWQpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIFNlYXJjaGVzIGZvciBhIHNwZWNpZmljIGZvb2QgaXRlbS5cclxuICAgICAgICBmaW5kOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiBcIi9hcGkvZmluZC9mb29kaXRlbVwiLFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGJyYW5kOiBkYXRhLmJyYW5kLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGRhdGEudHlwZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBnZXRDYXRlZ29yaWVzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoXCIvYXBpL21ldGFkYXRhL2Zvb2RpdGVtXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG59KTsiLCJhbmd1bGFyLm1vZHVsZShcIkZvb2RKb3VybmFsQXBwXCIpLmZhY3RvcnkoXCJKb3VybmFsRW50cnlTZXJ2aWNlXCIsIGZ1bmN0aW9uICgkaHR0cCkge1xyXG4vKlxyXG4gICAgXCIvam91cm5hbGVudHJ5XCJcclxuICAgICAgICBHRVQgICAgICAgICAtIFJldHVybnMgYWxsIGpvdXJuYWwgZW50cmllcyBpbiBkYXRhYmFzZS5cclxuICAgICAgICBQT1NUICAgICAgICAtIENyZWF0ZXMgYSBuZXcgam91cm5hbCBlbnRyeVxyXG5cclxuICAgIFwiL2pvdXJuYWxlbnRyeS86aWRcIiA6aWQgLSBfaWQgdmFsdWUgb2YgdGhlIGpvdXJuYWwgZW50cnkgaW4gZGF0YWJhc2VcclxuICAgICAgICBHRVQgICAgICAgICAtIFJldHVybnMgc3BlY2lmaWMgam91cm5hbCBlbnRyeS5cclxuICAgICAgICBQVVQgICAgICAgICAtIFVwZGF0ZSBzcGVjaWZpYyBqb3VybmFsIGVudHJ5LlxyXG4gICAgICAgIERFTEVURSAgICAgIC0gUmVtb3ZlIHNwZWNpZmljIGpvdXJuYWwgZW50cnkgZnJvbSBkYXRhYmFzZS5cclxuICAgICAgICAqL1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBnZXRBbGw6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldChcIi9qb3VybmFsZW50cnlcIik7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgY3JlYXRlOiBmdW5jdGlvbiAoZW50cnlEYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KFwiL2pvdXJuYWxlbnRyeVwiLCBlbnRyeURhdGEpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKGVudHJ5SWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldChcIi9qb3VybmFsZW50cnkvXCIgKyBlbnRyeUlkKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uIChlbnRyeUlkLCBlbnRyeURhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLnB1dChcIi9qb3VybmFsZW50cnkvXCIgKyBlbnRyeUlkLCBlbnRyeURhdGEpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKGVudHJ5SWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmRlbGV0ZShcIi9qb3VybmFsZW50cnkvXCIgKyBlbnRyeUlkKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxufSk7Il19
